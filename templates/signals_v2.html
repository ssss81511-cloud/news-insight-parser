{% extends "base.html" %}

{% block title %}–°–∏–≥–Ω–∞–ª—ã - News Insight Parser{% endblock %}

{% block content %}
<div class="signals-page">
    <h2>–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –∏ –∏–Ω—Å–∞–π—Ç—ã</h2>

    <!-- Filter buttons -->
    <div class="filter-buttons" style="margin-bottom: 2rem;">
        <a href="/signals" class="btn btn-active">–í—Å–µ</a>
        <a href="/signals?priority=critical" class="btn">üî¥ Critical</a>
        <a href="/signals?priority=high" class="btn">üü† High</a>
        <a href="/signals?trending=true" class="btn">üî• Trending</a>
    </div>

    <div class="info-box">
        <h4>–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∏–≥–Ω–∞–ª—ã v2.0?</h4>
        <p>–£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–µ–π –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:</p>
        <ul>
            <li><strong>–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã (pains):</strong> –û–±—â–∏–µ –±–æ–ª–∏, —É–ø–æ–º—è–Ω—É—Ç—ã–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ª—é–¥—å–º–∏</li>
            <li><strong>–ù–æ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã (language):</strong> –¢–µ—Ä–º–∏–Ω—ã –∏ —Ñ—Ä–∞–∑—ã, –Ω–∞–±–∏—Ä–∞—é—â–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å</li>
            <li><strong>–ü–∞—Ç—Ç–µ—Ä–Ω—ã —Ä–µ—à–µ–Ω–∏–π (solutions):</strong> –ü–æ—Ö–æ–∂–∏–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º</li>
        </ul>
        <p><strong>–ù–æ–≤–æ–µ:</strong></p>
        <ul>
            <li>üéØ <strong>–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:</strong> Critical / High / Medium / Low</li>
            <li>üí¨ <strong>–ö–æ–Ω—Ç–µ–∫—Å—Ç:</strong> –†–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã –∏–∑ –æ–±—Å—É–∂–¥–µ–Ω–∏–π</li>
            <li>üìä <strong>–ö—Ä–æ—Å—Å-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑:</strong> –°–∏–≥–Ω–∞–ª—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è</li>
            <li>üìà <strong>–¢—Ä–µ–Ω–¥—ã:</strong> –†–∞—Å—Ç—ë—Ç –∏–ª–∏ –ø–∞–¥–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å</li>
        </ul>
    </div>

    <!-- Cross-source signals -->
    {% if cross_source_signals %}
    <div class="card" style="background: #fff3cd; border-left: 4px solid #f39c12;">
        <h3>üåê –ö—Ä–æ—Å—Å-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã (HN + Reddit + PH)</h3>
        <p>–≠—Ç–∏ —Å–∏–≥–Ω–∞–ª—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã–µ!</p>
        <div class="signals-list">
            {% for signal in cross_source_signals[:5] %}
            <div class="signal-card signal-{{ signal.signal_type }}" style="border-left: 4px solid #f39c12;">
                <div class="signal-header">
                    <span class="badge badge-{{ signal.signal_type }}">{{ signal.signal_type }}</span>
                    <span class="badge badge-{{ signal.priority }}">{{ signal.priority }}</span>
                    <span class="signal-frequency">{{ signal.frequency }} —É–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
                    <span style="color: #f39c12;">‚≠ê {{ signal.importance_score|int }}/100</span>
                </div>

                <h3>{{ signal.title }}</h3>
                <p class="signal-description">{{ signal.description }}</p>

                {% if signal.context_snippets %}
                <div style="background: #f8f9fa; padding: 1rem; margin-top: 0.5rem; border-radius: 4px;">
                    <strong>üí¨ –ü—Ä–∏–º–µ—Ä—ã:</strong>
                    {% set contexts = signal.context_snippets|fromjson %}
                    <ul style="margin-top: 0.5rem; list-style: none;">
                        {% for context in contexts[:3] %}
                        <li style="margin-bottom: 0.5rem; font-style: italic; color: #555;">
                            "{{ context[:150] }}..."
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <div class="signal-meta">
                    {% set sources = signal.sources|fromjson %}
                    <span>Sources: {{ sources|join(', ') }}</span>
                    <span>First: {{ time_ago(signal.first_seen) }}</span>
                    <span>Last: {{ time_ago(signal.last_seen) }}</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- All signals -->
    {% if signals %}
    <div class="signals-list">
        {% for signal in signals %}
        <div class="signal-card signal-{{ signal.signal_type }}">
            <div class="signal-header">
                <span class="badge badge-{{ signal.signal_type }}">{{ signal.signal_type }}</span>
                <span class="badge badge-{{ signal.priority }}">{{ signal.priority }}</span>
                <span class="signal-frequency">{{ signal.frequency }} —É–ø–æ–º–∏–Ω–∞–Ω–∏–π</span>
                {% if signal.is_trending %}
                    <span style="color: #e74c3c;">üî• Trending</span>
                {% endif %}
                <span style="color: #7f8c8d;">‚≠ê {{ signal.importance_score|int }}/100</span>
            </div>

            <h3>{{ signal.title }}</h3>
            <p class="signal-description">{{ signal.description }}</p>

            <!-- Context snippets -->
            {% if signal.context_snippets %}
            <div style="background: #f8f9fa; padding: 1rem; margin-top: 0.5rem; border-radius: 4px;">
                <strong>üí¨ –ö–æ–Ω—Ç–µ–∫—Å—Ç:</strong>
                {% set contexts = signal.context_snippets|fromjson %}
                <ul style="margin-top: 0.5rem; list-style: none;">
                    {% for context in contexts[:3] %}
                    <li style="margin-bottom: 0.5rem; font-style: italic; color: #555;">
                        "{{ context[:200] }}..."
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <div class="signal-meta">
                {% if signal.sources %}
                    {% set sources = signal.sources|fromjson %}
                    <span>Sources: {{ sources|join(', ') }}</span>
                {% endif %}
                <span>First: {{ time_ago(signal.first_seen) }}</span>
                <span>Last: {{ time_ago(signal.last_seen) }}</span>
                {% if signal.growth_rate > 0 %}
                    <span style="color: #27ae60;">üìà –†–∞—Å—Ç—ë—Ç</span>
                {% elif signal.growth_rate < 0 %}
                    <span style="color: #e74c3c;">üìâ –ü–∞–¥–∞–µ—Ç</span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state card">
        <p>–°–∏–≥–Ω–∞–ª–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ù–∞–∂–º–∏—Ç–µ "–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.</p>
        <a href="/" class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</a>
    </div>
    {% endif %}
</div>

<style>
.badge-critical {
    background: #e74c3c;
    color: white;
}
.badge-high {
    background: #f39c12;
    color: white;
}
.badge-medium {
    background: #3498db;
    color: white;
}
.badge-low {
    background: #95a5a6;
    color: white;
}
</style>
{% endblock %}
